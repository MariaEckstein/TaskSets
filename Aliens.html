<!doctype html>
<html jspsych = "present">
  <head>
    <title>Aliens</title>
    <script>
      // IMPORTANT PARAMETERS
      var short_version = false;  // false or true
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jspsych-5.0.3/jspsych.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-feed-aliens.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-pick-aliens.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-start_new_season.js"></script>
    <script src="alien_plugins/Triggers.js"></script>
    <script src="alien_plugins/helper_functions.js"></script>
    <script src="alien_plugins/set_timing_and_numbers.js"></script>
    <script src="alien_plugins/names_and_competition_images.js"></script>
    <script src="alien_plugins/define_TS.js"></script>
    <script src="alien_plugins/FeedAliensTimelines.js"></script>
    <script src="alien_plugins/1InitialLearn_instructions.js"></script>
    <script src="alien_plugins/2CloudySeason_instructions.js"></script>
    <script src="alien_plugins/3Competition_instructions.js"></script>
    <script src="alien_plugins/3Competition_trials.js"></script>
    <script src="alien_plugins/RemainingInstructions.js"></script>
    <script src="alien_plugins/5Rainbow_instructions.js"></script>
    <script src="alien_plugins/StrategyQuestionnaire.js"></script>
    <link href="jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <link href="alien_plugins/alien_style.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
  </body>

  <script>

    /* create experiment timeline array */
    var timeline = [
        get_subj_data,
        phase1_instructions,
      training_block,  // v1.0: 10 blocks; v2.0: 8 blocks; v3.0: ??? blocks
      training_instructions_post,
      phase1_initial_learn,  // all v: 3 blocks per season, 13 trials per alien per block
      phase1_instructions_post,
      phase2_instructions,
      phase2_cloudy,  // v1.0: 2 blocks per season, v2.0: 3 blocks per season; both: 10 trials per alien per block
      phase2_instructions_post,
      refresher_block_2,  // all v: 2 blocks, 7 trials per alien per block
      phase3_instructions,
      phase3_pick_aliens,  // v1.0: 2 trials per pair (4 trials per image for aliens [because I missed alien3], seasons, and items; 6 trials for alien-same-season); v2.0: 4 trials per season, alien, and item pairs, 2 trials per alien-same-season (8 trials per season and item images, 12 trials per alien image, 6 trials per alien-same-season)
      phase3_post,
      refresher_block_3,  // all v: 2 blocks, 7 trials per alien per block
      phase5_instructions,
      rainbow_season_phase5,  // v1.0: 3 blocks; v3.0: 6 blocks; v3.0: ??? blocks
      //phase6_mixed_instructions,
      //phase6_mixed_block, // new mixed_block
      phase5_after,  // to get rid of rainbow background
      //strategy_questionnaire,
      goodbye
    ]

    /* start the experiment */
    var images = ['img/alien1.png', 'img/alien2.png', 'img/alien3.png', 'img/alien4.png', 'img/alien5.png',
        'img/alien6.png', 'img/alien7.png', 'img/alien8.png', 'img/alien9.png', 'img/alien10.png', 'img/alien_blank.png',
        'img/aliens.png', 'img/bed.png', 'img/cold.png', 'img/cold_cloudy.png', 'img/happy.png', 'img/happy2.png',
        'img/hot.png', 'img/hot_cloudy.png', 'measuringtape.png', 'img/measuringtape_5cm.png', 'img/plant.png',
        'img/rainbow.png', 'img/rainy.png', 'img/rainy_cloudy.png', 'img/rock.png', 'img/sad.png', 'img/speech.png',
        'img/training.png', 'img/umbrella.png'];

        jsPsych.init({
            timeline: timeline,
            //show_preload_progress_bar: false, // hide preload progress bar
            fullscreen: true,
            preload_images: images,
            on_finish: function () {
                console.log(endEvent);
                document.dispatchEvent(endEvent);
                jsPsych.data.localSave('test.csv', 'csv')
            }
        });

  </script>
</html>
